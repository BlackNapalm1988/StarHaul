<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>StarHaul ‚Äî RTS-Lite Cargo Runner</title>
  <style>
    :root{ --bg:#05070e; --fg:#e6edf3; --muted:#9aa5b1; --accent:#6df2d6; --accent2:#6db8f2; --warn:#ffd56b; --bad:#ff6b6b; --ok:#6bff9a; --danger:#ff9f6b }
    html,body{height:100%;margin:0;background:radial-gradient(1200px 800px at 70% 10%,#0e1430 0%,#0b0f1f 45%,#070a14 100%);color:var(--fg);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";overflow:hidden}
    .wrap{position:absolute;inset:0;display:grid;place-items:center;padding:12px}
    canvas{width:min(100vw-24px,1200px);height:calc((min(100vw - 24px, 1200px))*0.625);max-height:min(100vh-24px,800px);aspect-ratio:16/10;background:linear-gradient(180deg, rgba(17,19,33,.8), rgba(6,8,16,.9));box-shadow:0 10px 40px rgba(0,0,0,.55), inset 0 0 120px rgba(0,0,0,.35);border-radius:18px;outline:1px solid rgba(255,255,255,.08)}
    .hidden{display:none !important}
    #hud{position:absolute;top:10px;left:10px;right:10px;display:flex;gap:8px;align-items:center;justify-content:space-between;font-weight:700;user-select:none;pointer-events:none}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:rgba(12,15,28,.6);outline:1px solid rgba(255,255,255,.08);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);pointer-events:auto;box-shadow:0 0 0 1px rgba(109,242,214,.06) inset}
    .stat{display:inline-flex;gap:8px;align-items:center}
    .btn{appearance:none;border:0;cursor:pointer;padding:6px 10px;border-radius:10px;background:rgba(255,255,255,.08);color:var(--fg);font-weight:800}
    .btn:hover{background:rgba(255,255,255,.14)}
    .panel{width:min(880px,92vw);border-radius:18px;padding:18px 20px;background:rgba(10,14,22,.9);outline:1px solid rgba(255,255,255,.08);box-shadow:0 12px 40px rgba(0,0,0,.5)}
    h1{margin:0 0 6px;font-size:clamp(28px,3.4vw,42px);letter-spacing:.5px}
    .sub{margin:4px 0 10px;color:var(--muted)}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    ul{margin:8px 0 0 18px}
    #dockUI{position:absolute;bottom:14px;left:14px;right:14px;display:none;gap:10px;z-index:3}
    .dock{flex:1;display:flex;flex-direction:column;gap:8px;padding:12px;border-radius:14px;background:rgba(13,18,28,.92);outline:1px solid rgba(255,255,255,.08)}
    .dock h3{margin:0 0 4px}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .list{max-height:180px;overflow:auto;border-radius:8px;background:rgba(255,255,255,.03);padding:8px}
    .item{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:6px 8px;border-radius:8px}
    .item:nth-child(odd){background:rgba(255,255,255,.03)}
    .badge{padding:2px 6px;border-radius:999px;background:rgba(255,255,255,.08);font-size:12px}
    #missionPill{cursor:pointer}
    #radar{position:absolute;right:16px;bottom:16px;width:200px;height:200px;border-radius:12px;background:rgba(10,14,22,.65);outline:1px solid rgba(255,255,255,.08);display:grid;place-items:center;font-size:12px;z-index:2}
    #touchpad{position:absolute;bottom:20px;left:20px;right:20px;display:none;justify-content:space-between;pointer-events:none}
    .pad{display:grid;grid-template-columns:repeat(2,68px);grid-template-rows:repeat(2,68px);gap:10px;pointer-events:auto}
    .tbtn{width:68px;height:68px;border-radius:16px;background:rgba(255,255,255,.06);outline:1px solid rgba(255,255,255,.12)}
    .fire{width:88px;height:88px;border-radius:999px;align-self:end}
    @media (max-width:820px){#touchpad{display:flex}.hide-mobile{display:none}}
    #missionLog{position:absolute;top:58px;right:10px;width:min(420px,92vw);display:none;gap:8px;padding:10px;border-radius:14px;background:rgba(13,18,28,.95);outline:1px solid rgba(255,255,255,.08);box-shadow:0 10px 30px rgba(0,0,0,.5);z-index:4}
    #missionLog h3{margin:0 0 6px}
    .muted{color:var(--muted)}
    #toasts{position:absolute;left:50%;top:20px;transform:translateX(-50%);display:flex;flex-direction:column;gap:8px;pointer-events:none;z-index:6}
    .toast{padding:8px 12px;border-radius:10px;background:rgba(20,28,44,.9);outline:1px solid rgba(255,255,255,.08);box-shadow:0 6px 18px rgba(0,0,0,.4)}
    .overlay{position:absolute;inset:0;display:grid;place-items:center;background:radial-gradient(900px 600px at 50% 30%,rgba(10,14,22,.55),rgba(7,10,16,.85));backdrop-filter:blur(2px);z-index:5}
    #startScreen .actions{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
    #startScreen img.start-image{width:100%;height:auto;}
    #leaderboard{margin-top:12px}
    #leaderboard table{width:100%;border-collapse:collapse}
    #leaderboard th,#leaderboard td{padding:6px 8px;text-align:left;border-bottom:1px solid rgba(255,255,255,.08)}
    #pauseOverlay .actions{display:flex;gap:8px;margin-top:10px}
    #gameOver .actions{display:flex;gap:8px;margin-top:10px}

    /* life bar */
    #lifeBar{position:absolute;left:0;right:0;top:0;height:8px;background:rgba(255,255,255,.08);z-index:2;}
    #lifeFill{height:100%;width:100%;background:var(--ok);}
  </style>
</head>
<body>
  <div class="wrap">
    <canvas id="game" width="960" height="600"></canvas>
    <div id="lifeBar"><div id="lifeFill"></div></div>

    <div id="hud">
      <div class="pill stat">$<span id="credits">0</span> ¬∑ Fuel <span id="fuel">0</span> ¬∑ Ammo <span id="ammo">0</span> ¬∑ Cargo <span id="cargo">0</span>/<span id="cargoMax">0</span> ¬∑ Hull <span id="hull">100</span>/<span id="hullMax">100</span> ¬∑ Lives <span id="lives">3</span> ¬∑ Rep <span id="rep">0</span></div>
      <div class="pill stat" id="missionPill" title="Mission Log (click)">Missions: <span id="missionCount">0</span></div>
      <div class="pill"><button class="btn" id="pauseBtn">Pause</button> <button class="btn" id="restartBtn">Restart</button></div>
    </div>

    <div id="missionLog">
      <h3>Mission Log</h3>
      <div class="list" id="missionLogList"></div>
      <div class="muted" style="font-size:12px">Tip: Higher <b>Reputation</b> unlocks better‚Äëpaying contracts.</div>
    </div>

    <div id="dockUI">
      <div class="dock" id="market">
        <h3>Station Market</h3>
        <div class="row">
          <span class="badge">‚õΩ Fuel $2/u</span>
          <span class="badge">üî´ Ammo $5/round</span>
          <span class="badge">üîß Repairs $20/hull</span>
        </div>
        <div class="row">
          <button class="btn" data-buy="fuel">+50 Fuel</button>
          <button class="btn" data-buy="ammo">+10 Ammo</button>
          <button class="btn" data-buy="repair">Repair 10</button>
        </div>
        <h4>Upgrades</h4>
        <div class="list" id="upgrades"></div>
      </div>
      <div class="dock" id="missions">
        <h3>Contracts</h3>
        <div class="row"><button class="btn" id="setHomeBtn">Set Home</button></div>
        <div class="list" id="missionList"></div>
        <div class="row"><button class="btn" id="undockBtn">Undock (E)</button></div>
      </div>
    </div>

    <div id="radar"><canvas id="mini" width="180" height="180" aria-hidden="true"></canvas></div>
    <div id="toasts"></div>

    <div id="touchpad" aria-hidden="true">
      <div class="pad" id="leftPad">
        <button class="tbtn" data-act="left"></button>
        <button class="tbtn" data-act="right"></button>
        <button class="tbtn" data-act="thrust"></button>
        <button class="tbtn" data-act="hyperspace"></button>
      </div>
      <button class="tbtn fire" id="fireBtn" data-act="fire"></button>
    </div>

    <div id="startScreen" class="overlay">
      <div class="panel">
        <img src="StarHauler_Startscreen.png" alt="StarHaul" class="start-image" />
        <p class="sub">RTS‚Äëlite cargo runner. Explore a vast sector with planets, contracts, pirates, black holes ‚Äî and deadly, evolving stars.</p>
        <div class="grid">
          <div>
            <strong>Controls</strong>
            <ul>
              <li><b>‚Üê/‚Üí</b> Rotate ¬∑ <b>‚Üë</b> Thrust</li>
              <li><b>Space</b> Fire (uses ammo)</li>
              <li><b>E</b> Dock/Undock ¬∑ <b>F</b> Warp Gate</li>
              <li><b>Shift</b> Hyperspace ¬∑ <b>P</b> Pause</li>
            </ul>
          </div>
          <div>
            <strong>Goal</strong>
            <ul>
              <li>Take <b>contracts</b>, deliver cargo, earn credits.</li>
              <li>Spend on fuel, ammo, repairs & upgrades (max Lv 4).</li>
              <li>Deliveries raise <b>Reputation</b> ‚Üí higher-paying work.</li>
              <li>Avoid stars: collision is <b>instant game over</b>. Unstable stars may <b>supernova</b>.</li>
            </ul>
          </div>
        </div>
        <div class="actions">
          <button class="btn" id="newGameBtn">New Game</button>
          <button class="btn" id="viewScoresBtn">High Scores</button>
          <button class="btn" id="quitBtn">Quit</button>
        </div>
        <div id="leaderboard" class="hidden">
          <h3>Leaderboard</h3>
          <table>
            <thead><tr><th>#</th><th>Pilot</th><th>Credits</th><th>Rep</th><th>Date</th></tr></thead>
            <tbody id="scoresBody"></tbody>
          </table>
        </div>
      </div>
    </div>

    <div id="pauseOverlay" class="overlay hidden">
      <div class="panel">
        <h1>PAUSED</h1>
        <div id="pauseStats" class="muted" style="margin-top:8px"></div>
        <div class="actions">
          <button class="btn" id="resumeBtn">Resume</button>
          <button class="btn" id="pauseRestartBtn">Restart</button>
          <button class="btn" id="toMenuBtn">Main Menu</button>
        </div>
      </div>
    </div>

    <div id="gameOver" class="overlay hidden">
      <div class="panel">
        <h1>GAME OVER</h1>
        <div class="muted" id="finalStats"></div>
        <div class="row" style="margin-top:10px;align-items:center;gap:8px">
          <label for="pilotName">Pilot</label>
          <input id="pilotName" placeholder="Enter name" style="flex:1;min-width:160px;padding:6px 8px;border-radius:8px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06);color:var(--fg)" />
          <button class="btn" id="saveScoreBtn">Save Score</button>
        </div>
        <div class="actions">
          <button class="btn" id="goMenuBtn">Return to Menu</button>
        </div>
      </div>
    </div>

  </div>

<script type="module" src="src/main.js"></script>
</body>
</html>
